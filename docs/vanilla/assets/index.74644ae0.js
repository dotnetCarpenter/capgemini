var U=Object.defineProperty,k=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var g=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))O.call(t,n)&&g(e,n,t[n]);if(p)for(var n of p(t))C.call(t,n)&&g(e,n,t[n]);return e},h=(e,t)=>k(e,q(t));import{d}from"./vendor.a6924a02.js";const F=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};F();const R=new Intl.DateTimeFormat("no-NO",{dateStyle:"long",timeStyle:"medium"}).format,D=new Intl.DateTimeFormat("no-NO",{dateStyle:"short"}).format,l=e=>t=>t==null?null:e(t),u=e=>{try{if(e==null)throw new TypeError("Invalid Date");return new Date(e)}catch(t){return console.error(t),null}},H=(...e)=>t=>e.reduce((n,r)=>r(n),t),M=e=>t=>t.map(e),P=e=>t=>Array.prototype.forEach.call(t,e),j=(e,t)=>new Promise((n,r)=>{const o=t;e.classList.add("animate-animated",o);const a=s=>{s.stopPropagation(),e.classList.remove("animate-animated",o),n()};e.addEventListener("animationend",a,{once:!0})}),_=l(D),$=l(R),x=document.getElementById("rowTmpl").textContent,K=d.template(x),b=document.getElementById("rows"),V="https://nvdbapiles-v3.atlas.vegvesen.no/vegobjekter/103?kartutsnitt=270153.519,7040213.023,270332.114,7040444.864&kommune=5001&segmentering=true&inkluder=metadata",W=()=>{fetch(V,{headers:{Accept:"application/vnd.vegvesen.nvdb-v3-rev1+json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(H(z,G(J),M(Q),X)).catch(I)};function z(e){var t;return(t=e==null?void 0:e.objekter)==null?void 0:t.map(n=>{var r,o,a,s,f;return{status:"Registrert",id:n.id,href:n==null?void 0:n.href,name:(o=(r=n==null?void 0:n.metadata)==null?void 0:r.type)==null?void 0:o.navn,version:(a=n==null?void 0:n.metadata)==null?void 0:a.versjon,startDate:u((s=n==null?void 0:n.metadata)==null?void 0:s.startdato),lastModified:u((f=n==null?void 0:n.metadata)==null?void 0:f.sist_modifisert)}})}function G(e){return t=>t.sort(e)}function J(e,t){return e.startDate<t.startDate?-1:e.startDate>t.startDate?1:0}function Q(e){return h(v({},e),{startDate:_(e.startDate),lastModified:$(e.lastModified)})}function X(e){e?b.innerHTML=K(e):I(new Error("Fant ingen fartsdempere"))}function I(e){const t=document.getElementById("errorTmpl").textContent;b.innerHTML=d.template(t)(e)}var y={main:W,onUnmounted(){},mountElement:document.getElementById("page-overview")};const Y=l(D),c=document.getElementById("registration"),S=c.querySelector('input[type="submit"]'),Z=c.querySelector('[name="name"]'),ee=c.querySelector('[name="date"]'),i=document.querySelector(".notification"),te=e=>{e.ariaDisabled="true",e.disabled=!0},ne=e=>{e.ariaDisabled="false",e.disabled=!1},oe=P(e=>{e.value=e.defaultValue}),ae=e=>{i.querySelector(".notification__message").textContent=String(e),i.classList.add("animate-backInDown"),i.classList.remove("hidden")},re=async()=>{i.classList.contains("hidden")||(await j(i,"animate-backOutDown"),i.classList.add("hidden"),i.querySelector(".notification__message").textContent="")},T=()=>{oe(c.elements),re(),ne(S)},A=e=>{e.preventDefault(),te(S);const t=u(ee.value);if(t){const n=l(r=>r.replaceAll(".","/"))(Y(t));console.log(n),ae(`Du registrerte ${Z.value} den ${n}`)}setTimeout(T,3e3)},se=()=>{c.addEventListener("submit",A)},ie=()=>{c.removeEventListener("submit",A),T()};var ce={main:se,onUnmounted:ie,mountElement:document.getElementById("page-register")};const de={main(){console.error("404: page not found")},onUnmounted(){},mountElement:document.getElementById("page-not-found")},E=e=>t=>{t.forEach(n=>{n.innerHTML=e()})},le=()=>{E(d.template(document.getElementById("headerTmpl").textContent))(document.querySelectorAll(".header")),E(d.template(document.getElementById("footerTmpl").textContent))(document.querySelectorAll(".footer"))},m="animate-backOutUp",B="animate-backInDown",ue=e=>e.classList.contains(m),me=e=>{e.addEventListener("animationend",()=>{ue(e)?(e.classList.remove("animate-animated",m),e.classList.add("hidden-force","pointer-events-none")):e.classList.remove("animate-animated",B,"pointer-events-none")})},w={"":y,"#overview":y,"#register":ce,"#404":de},L=e=>w[e]||w["#404"],N=e=>{const t=new URL(e.newURL),n=e.oldURL&&L(new URL(e.oldURL).hash),r=L(t.hash);n!==r&&(r.main(),n&&(n.mountElement.classList.add("animate-animated",m),n.onUnmounted()),r.mountElement.classList.add("animate-animated",B),r.mountElement.classList.remove("hidden-force"))};window.addEventListener("hashchange",N,!1);le();document.querySelectorAll(".page").forEach(me);N({newURL:window.location});
