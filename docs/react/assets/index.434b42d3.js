var k=Object.defineProperty,D=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var N=(a,t,r)=>t in a?k(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,d=(a,t)=>{for(var r in t||(t={}))j.call(t,r)&&N(a,r,t[r]);if(v)for(var r of v(t))C.call(t,r)&&N(a,r,t[r]);return a},m=(a,t)=>D(a,S(t));import{j as f,L as u,O as F,r as y,R as x,B as L,a as R,b as c,c as q}from"./vendor.f42e2db4.js";const B=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}};B();var O="/capgemini/react/assets/favicon.15107f4c.svg";const e=f.exports.jsx,n=f.exports.jsxs,E=f.exports.Fragment,A=()=>n("div",{className:"app antialiased absolute overflow-hidden",children:[n("header",{className:"app__header bg-svv-grey flex items-center flex-row mb-3 leading-8",children:[e(u,{to:"/capgemini/react/",children:e("img",{src:O,className:"logo h-12 md:h-24",alt:"logo"})}),e("nav",{className:"grow justify-self-stretch",children:n("ol",{className:"text-zinc-50 text-center space-x-1 md:space-x-4",children:[e("li",{className:"inline-block",children:e(u,{className:"hover:underline",to:"/capgemini/react/overview",children:"Oversikt"})}),e("li",{className:"inline-block",children:e(u,{className:"hover:underline",to:"/capgemini/react/register",children:"Registrer"})})]})}),e("button",{className:"button mr-1 md:mr-4",children:"Logg ut"})]}),e(F,{}),e("footer",{className:"app__footer bg-slate-100 grid grid-rows-3 pl-1",children:n("section",{className:"max-w-md row-start-3",children:[e("h3",{className:"text text-base font-semibold tracking-wider",children:"Drevet av ferske vegdata fra Nasjonal vegdatabank"}),n("ol",{className:"text-sm flex items-end",children:[e("li",{className:"flex-grow",children:"Statens vegvesen"}),e("li",{className:"flex-grow",children:"Vegkart"}),e("li",{className:"flex-grow",children:"Kartverket"})]})]})})]}),H=new Intl.DateTimeFormat("no-NO",{dateStyle:"long",timeStyle:"medium"}).format,w=new Intl.DateTimeFormat("no-NO",{dateStyle:"short"}).format,h=a=>t=>t==null?null:a(t),p=a=>{try{if(a==null)throw new TypeError("Invalid Date");return new Date(a)}catch(t){return console.error(t),null}},M=(...a)=>t=>a.reduce((r,l)=>l(r),t),T=(...a)=>t=>a.reduce((r,l)=>Promise.resolve(r).then(l),t),_=a=>t=>t.map(a),I=a=>t=>t.sort(a);var P="/capgemini/react/assets/loader.b22d2804.svg";const $=h(w),U=h(H),V=a=>{var t;return(t=a==null?void 0:a.objekter)==null?void 0:t.map(r=>{var l,s,i,o,b;return{status:"Registrert",id:r.id,href:r==null?void 0:r.href,name:(s=(l=r==null?void 0:r.metadata)==null?void 0:l.type)==null?void 0:s.navn,version:(i=r==null?void 0:r.metadata)==null?void 0:i.versjon,startDate:p((o=r==null?void 0:r.metadata)==null?void 0:o.startdato),lastModified:p((b=r==null?void 0:r.metadata)==null?void 0:b.sist_modifisert)}})},z=(a,t)=>a.startDate<t.startDate?-1:a.startDate>t.startDate?1:0,K=a=>m(d({},a),{startDate:$(a.startDate),lastModified:U(a.lastModified)}),W=M(V,I(z),_(K)),G=a=>T(t=>fetch(a,{headers:{Accept:"application/vnd.vegvesen.nvdb-v3-rev1+json"},signal:t}),t=>t.ok?t.json():Promise.reject(new Error(`HTTP error! status: ${t.status}`))),J=a=>{var t;return n("tr",{title:`Sist modifisert ${a.speedBump.lastModified||"er ikke spesifisert"}`,children:[e("td",{className:"tabular-nums border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.id||"-"}),e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.version||"-"}),e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.name||"-"}),e("td",{className:"tabular-nums border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.startDate||"-"}),e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.status||"-"}),e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:((t=a.speedBump)==null?void 0:t.href)&&e("a",{href:a.speedBump.href,target:"_blank",children:"\u{1F5FA}\uFE0F"})})]})},Q=({message:a})=>e("tr",{children:e("td",{colSpan:"6",className:"text-red-800 text-xl font-bold",children:String(a)})}),g=a=>{const[t,r]=y.exports.useState({speedBumps:[],error:null,isLoading:!0}),s=G("https://nvdbapiles-v3.atlas.vegvesen.no/vegobjekter/103?kartutsnitt=270153.519,7040213.023,270332.114,7040444.864&kommune=5001&segmentering=true&inkluder=metadata"),i=new AbortController;return y.exports.useEffect(()=>(t.speedBumps.length===0&&!t.error&&s(i.signal).then(W).then(o=>{r(m(d({},t),{speedBumps:o,isLoading:!1}))}).catch(o=>{r(m(d({},t),{error:o,isLoading:!1}))}),()=>{i.abort()})),e("section",{id:"page-overview",className:"page overflow-auto",children:n("article",{className:"md:p-2",children:[e("h1",{className:"text-3xl font-bold text-svv-grey mb-3 pl-1",children:"Mine fartsdempere"}),e("p",{className:"max-w-x-screen mb-3 md:w-1/2 px-1",children:"Mine fartsdempere er en oversikt over alle fartsdemperene som har blitt sendt inn. Her kan du raskt se statusen p\xE5 registreringen, og se de i vegkart."}),n("table",{className:"table-auto border-collapse text-sm w-full",children:[e("caption",{className:"text-lg font-bold text-svv-grey text-left bg-slate-300 py-2 pl-2",children:"Fartsdempere"}),e("thead",{className:"bg-slate-100",children:n("tr",{children:[e("th",{className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Id"}),e("th",{className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Versjon"}),e("th",{className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Navn"}),e("th",{className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Startdato"}),e("th",{colSpan:"2",className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Status"})]})}),e("tbody",{id:"rows",className:"bg-white",children:t.isLoading?e("tr",{children:e("td",{colSpan:"5",children:e("img",{src:P,className:"w-24 h-24 mx-auto my-3",alt:"loading..."})})}):t.error?e(Q,{message:t.error}):t.speedBumps.map(o=>e(J,{speedBump:o},String(o.id)))})]})]})})},X=a=>e("div",{className:a.className,onAnimationEnd:a.onAnimationEnd,children:n("section",{className:"notification z-40 absolute p-6 max-w-sm bg-white rounded-xl shadow-lg border",children:[e("h1",{className:"text-xl font-bold text-svv-grey mb-3 pl-1",children:"Notifikasjon"}),e("p",{className:"notification__message mb-3 px-1",children:a.message})]})}),Y=h(w);class Z extends x.Component{constructor(t){super(t);this.state={name:"",type:"",version:"",date:"",longitude:"",latitude:"",notification:{message:"",className:"hidden"}},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.cleanUpForm=this.cleanUpForm.bind(this),this.hideNotification=this.hideNotification.bind(this),this.notificationDisplayNone=this.notificationDisplayNone.bind(this)}setStateHelper(t){this.setState(d(d({},this.state),t))}handleChange(t){return r=>{this.setStateHelper({[t]:r.target.value})}}handleSubmit(t){t.preventDefault();const r=p(this.state.date);if(r){const l=h(s=>s.replaceAll(".","/"))(Y(r));console.log(l),this.showNotification(`Du registrerte ${this.state.name} den ${l}`),setTimeout(this.cleanUpForm,4e3)}}cleanUpForm(){this.hideNotification(),this.setStateHelper({name:"",type:"",version:"",date:"",longitude:"",latitude:""})}showNotification(t){this.setStateHelper({notification:{message:String(t),className:"animate-backInDown duration-1000"}})}hideNotification(){this.setStateHelper({notification:{message:this.state.notification.message,className:"animate-backOutDown duration-1000"}})}notificationDisplayNone(){this.state.notification.className==="animate-backOutDown"&&this.setStateHelper({notification:{message:"",className:"hidden"}})}render(){return n("section",{id:"page-register",className:"page overflow-auto",children:[e(E,{children:e(X,{message:this.state.notification.message,className:this.state.notification.className,onAnimationEnd:this.notificationDisplayNone})}),n("article",{className:"md:p-2",children:[e("h1",{className:"text-3xl font-bold text-svv-grey mb-3 pl-1",children:"Registrer ny fartsdemper"}),e("p",{className:"mb-3 md:w-1/2 px-1",children:"Her kan du registrere din nye fartsdemper ved \xE5 legge til metadata og lokasjon."}),e("form",{id:"registration",className:"max-w-md mt-8 mx-auto px-1",onSubmit:this.handleSubmit,children:n("div",{className:"grid grid-cols-1 gap-6",children:[n("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"Navn"}),e("input",{type:"text",name:"name",onChange:this.handleChange("name"),value:this.state.name,minLength:"3",required:!0,"aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 ",placeholder:"F.eks. Fartsdemper"})]}),n("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"Type"}),e("input",{type:"text",name:"type",onChange:this.handleChange("type"),value:this.state.type,required:!0,minLength:"3","aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 "})]}),n("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"Versjon"}),e("input",{type:"number",name:"version",onChange:this.handleChange("version"),value:this.state.version,required:!0,"aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 "})]}),n("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"Dato"}),e("input",{type:"date",name:"date",max:"6000-12-31",onChange:this.handleChange("date"),value:this.state.date,required:!0,"aria-required":"true",pattern:"\\d{2}/\\d{2}/\\d{4}",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 "})]}),n("div",{className:"flex gap-4",children:[n("label",{className:"block w-1/2",children:[e("span",{className:"text-gray-700",children:"Breddegrad"}),e("input",{type:"number",name:"longitude",onChange:this.handleChange("longitude"),value:this.state.longitude,required:!0,pattern:"^\\d+(\\.|,)?\\d+?$",step:"0.000001","aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 ",placeholder:"63.435948"})]}),n("label",{className:"block w-1/2",children:[e("span",{className:"text-gray-700",children:"Lengegrad"}),e("input",{type:"number",name:"latitude",onChange:this.handleChange("latitude"),value:this.state.latitude,required:!0,pattern:"^\\d+(\\.|,)?\\d+?$",step:"0.000001","aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 ",placeholder:"10.456106"})]})]}),e("input",{type:"submit",value:"Registrer",className:"button"})]})})]})]})}}const ee=()=>e("h1",{className:"text-3xl font-bold text-svv-red mb-3 pl-1",children:"404: Page Not Found"});function te(){return e(L,{children:e(R,{children:n(c,{path:"/",element:e(A,{}),children:[e(c,{index:!0,element:e(g,{})}),e(c,{path:"/capgemini/react/",element:e(g,{})}),e(c,{path:"/capgemini/react/overview",element:e(g,{})}),e(c,{path:"/capgemini/react/register",element:e(Z,{})}),e(c,{path:"*",element:e(ee,{})})]})})})}q.render(e(x.StrictMode,{children:e(te,{})}),document.getElementById("root"));
