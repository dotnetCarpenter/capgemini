var w=Object.defineProperty,k=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var N=(a,t,r)=>t in a?w(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,d=(a,t)=>{for(var r in t||(t={}))S.call(t,r)&&N(a,r,t[r]);if(v)for(var r of v(t))C.call(t,r)&&N(a,r,t[r]);return a},y=(a,t)=>k(a,D(t));import{j as g,L as h,O as F,R as b,B as j,a as R,b as c,c as B}from"./vendor.ae855622.js";const q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}};q();var O="/capgemini/react/assets/favicon.15107f4c.svg";const e=g.exports.jsx,s=g.exports.jsxs,H=g.exports.Fragment,L=()=>s("div",{className:"app antialiased absolute overflow-hidden",children:[s("header",{className:"app__header bg-svv-grey flex items-center flex-row mb-3 leading-8",children:[e(h,{to:"/capgemini/react/",children:e("img",{src:O,className:"logo h-12 md:h-24",alt:"logo"})}),e("nav",{className:"grow justify-self-stretch",children:s("ol",{className:"text-zinc-50 text-center space-x-1 md:space-x-4",children:[e("li",{className:"inline-block",children:e(h,{className:"hover:underline",to:"/capgemini/react/overview",children:"Oversikt"})}),e("li",{className:"inline-block",children:e(h,{className:"hover:underline",to:"/capgemini/react/register",children:"Registrer"})})]})}),e("button",{className:"button mr-1 md:mr-4",children:"Logg ut"})]}),e(F,{}),e("footer",{className:"app__footer bg-slate-100 h-48 grid grid-rows-3 pl-1",children:s("section",{className:"max-w-md row-start-3",children:[e("h3",{className:"text text-base font-semibold tracking-wider",children:"Drevet av ferske vegdata fra Nasjonal vegdatabank"}),s("ol",{className:"text-sm flex items-end",children:[e("li",{className:"flex-grow",children:"Statens vegvesen"}),e("li",{className:"flex-grow",children:"Vegkart"}),e("li",{className:"flex-grow",children:"Kartverket"})]})]})})]}),E=new Intl.DateTimeFormat("no-NO",{dateStyle:"long",timeStyle:"medium"}).format,x=new Intl.DateTimeFormat("no-NO",{dateStyle:"short"}).format,m=a=>t=>t==null?null:a(t),u=a=>{try{if(a==null)throw new TypeError("Invalid Date");return new Date(a)}catch(t){return console.error(t),null}},M=(...a)=>t=>a.reduce((r,i)=>i(r),t),T=a=>t=>t.map(a),A=m(x),_=m(E),I=a=>{var t;return(t=a==null?void 0:a.objekter)==null?void 0:t.map(r=>{var i,n,l,o,f;return{status:"Registrert",id:r.id,href:r==null?void 0:r.href,name:(n=(i=r==null?void 0:r.metadata)==null?void 0:i.type)==null?void 0:n.navn,version:(l=r==null?void 0:r.metadata)==null?void 0:l.versjon,startDate:u((o=r==null?void 0:r.metadata)==null?void 0:o.startdato),lastModified:u((f=r==null?void 0:r.metadata)==null?void 0:f.sist_modifisert)}})},U=a=>t=>t.sort(a),$=(a,t)=>a.startDate<t.startDate?-1:a.startDate>t.startDate?1:0,P=a=>y(d({},a),{startDate:A(a.startDate),lastModified:_(a.lastModified)}),V=a=>{var t;return s("tr",{title:`Sist modifisert ${a.speedBump.lastModified||"er ikke spesifisert"}`,children:[e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.id||"-"}),e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.version||"-"}),e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.name||"-"}),e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.startDate||"-"}),e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:a.speedBump.status||"-"}),e("td",{className:"border-b border-slate-100 py-2 pl-2 md:pl-8 text-svv-grey",children:((t=a.speedBump)==null?void 0:t.href)&&e("a",{href:a.speedBump.href,target:"_blank",children:"\u{1F5FA}\uFE0F"})})]})},z=({message:a})=>e("tr",{children:e("td",{colSpan:"6",className:"text-red-800 text-xl font-bold",children:String(a)})}),K="https://nvdbapiles-v3.atlas.vegvesen.no/vegobjekter/103?kartutsnitt=270153.519,7040213.023,270332.114,7040444.864&kommune=5001&segmentering=true&inkluder=metadata";class p extends b.Component{constructor(t){super(t);this.state={speedBumps:[],abortController:null,error:null}}setStateHelper(t){this.setState(d(d({},this.state),t))}fetchData(){const t=new AbortController;this.state.abortController=t,fetch(K,{headers:{Accept:"application/vnd.vegvesen.nvdb-v3-rev1+json"},signal:t.signal}).then(r=>{if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return r.json()}).then(M(I,U($),T(P),r=>{this.setStateHelper({speedBumps:r}),this.state.abortController=null})).catch(r=>{this.setStateHelper({error:r}),this.state.abortController.abort(),console.error(r)})}componentDidUpdate(t,r,i){console.log("componentDidUpdate"),this.state.abortController===null&&this.state.speedBumps.length===0&&this.fetchData()}render(){return this.state.speedBumps.length===0&&this.componentDidUpdate(),e("section",{id:"page-overview",className:"page overflow-auto",children:s("article",{className:"md:p-2",children:[e("h1",{className:"text-3xl font-bold text-svv-grey mb-3 pl-1",children:"Mine fartsdempere"}),e("p",{className:"max-w-x-screen mb-3 md:w-1/2 px-1",children:"Mine fartsdempere er en oversikt over alle fartsdemperene som har blitt sendt inn. Her kan du raskt se statusen p\xE5 registreringen, og se de i vegkart."}),s("table",{className:"table-auto border-collapse text-sm w-full",children:[e("caption",{className:"text-lg font-bold text-svv-grey text-left bg-slate-300 py-2 pl-2",children:"Fartsdempere"}),e("thead",{className:"bg-slate-100",children:s("tr",{children:[e("th",{className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Id"}),e("th",{className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Versjon"}),e("th",{className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Navn"}),e("th",{className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Startdato"}),e("th",{colSpan:"2",className:"border-b border-slate-600 font-semibold py-2 pl-2 md:pl-8 text-svv-grey text-left",children:"Status"})]})}),e("tbody",{id:"rows",className:"bg-white",children:this.state.error?e(z,{message:this.state.error}):this.state.speedBumps.map(t=>e(V,{speedBump:t},String(t.id)))})]})]})})}}const W=a=>e("div",{className:a.className,onAnimationEnd:a.onAnimationEnd,children:s("section",{className:"notification z-40 absolute p-6 max-w-sm bg-white rounded-xl shadow-lg border",children:[e("h1",{className:"text-xl font-bold text-svv-grey mb-3 pl-1",children:"Notifikasjon"}),e("p",{className:"notification__message mb-3 px-1",children:a.message})]})}),G=m(x);class J extends b.Component{constructor(t){super(t);this.state={name:"",type:"",version:"",date:"",longitude:"",latitude:"",notification:{message:"",className:"hidden"}},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.cleanUpForm=this.cleanUpForm.bind(this),this.hideNotification=this.hideNotification.bind(this),this.notificationDisplayNone=this.notificationDisplayNone.bind(this)}setStateHelper(t){this.setState(d(d({},this.state),t))}handleChange(t){return r=>{this.setStateHelper({[t]:r.target.value})}}handleSubmit(t){t.preventDefault();const r=u(this.state.date);if(r){const i=m(n=>n.replaceAll(".","/"))(G(r));console.log(i),this.showNotification(`Du registrerte ${this.state.name} den ${i}`),setTimeout(this.cleanUpForm,3e3)}}cleanUpForm(){this.hideNotification(),this.setStateHelper({name:"",type:"",version:"",date:"",longitude:"",latitude:""})}showNotification(t){this.setStateHelper({notification:{message:String(t),className:"animate-backInDown"}})}hideNotification(){this.setStateHelper({notification:{message:this.state.notification.message,className:"animate-backOutDown"}})}notificationDisplayNone(){this.state.notification.className==="animate-backOutDown"&&this.setStateHelper({notification:{message:"",className:"hidden"}})}render(){return s("section",{id:"page-register",className:"page overflow-auto",children:[e(H,{children:e(W,{message:this.state.notification.message,className:this.state.notification.className,onAnimationEnd:this.notificationDisplayNone})}),s("article",{className:"md:p-2",children:[e("h1",{className:"text-3xl font-bold text-svv-grey mb-3 pl-1",children:"Registrer ny fartsdemper"}),e("p",{className:"mb-3 md:w-1/2 px-1",children:"Her kan du registrere din nye fartsdemper ved \xE5 legge til metadata og lokasjon."}),e("form",{id:"registration",className:"max-w-md mt-8 mx-auto px-1",onSubmit:this.handleSubmit,children:s("div",{className:"grid grid-cols-1 gap-6",children:[s("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"Navn"}),e("input",{type:"text",name:"name",onChange:this.handleChange("name"),value:this.state.name,minLength:"3",required:!0,"aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 ",placeholder:"F.eks. Fartsdemper"})]}),s("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"Type"}),e("input",{type:"text",name:"type",onChange:this.handleChange("type"),value:this.state.type,required:!0,minLength:"3","aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 "})]}),s("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"Versjon"}),e("input",{type:"number",name:"version",onChange:this.handleChange("version"),value:this.state.version,required:!0,"aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 "})]}),s("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"Dato"}),e("input",{type:"date",name:"date",onChange:this.handleChange("date"),value:this.state.date,required:!0,"aria-required":"true",pattern:"\\d{2}/\\d{2}/\\d{4}",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 "})]}),s("div",{className:"flex gap-4",children:[s("label",{className:"block w-1/2",children:[e("span",{className:"text-gray-700",children:"Breddegrad"}),e("input",{type:"number",name:"longitude",onChange:this.handleChange("longitude"),value:this.state.longitude,required:!0,pattern:"^\\d+(\\.|,)?\\d+?$",step:"0.000001","aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 ",placeholder:"63.435948"})]}),s("label",{className:"block w-1/2",children:[e("span",{className:"text-gray-700",children:"Lengegrad"}),e("input",{type:"number",name:"latitude",onChange:this.handleChange("latitude"),value:this.state.latitude,required:!0,pattern:"^\\d+(\\.|,)?\\d+?$",step:"0.000001","aria-required":"true",className:" mt-1 block w-full bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0 ",placeholder:"10.456106"})]})]}),e("input",{type:"submit",value:"Registrer",className:"button"})]})})]})]})}}const Q=()=>e("h1",{className:"text-3xl font-bold text-svv-red mb-3 pl-1",children:"404: Page Not Found"});function X(){return e(j,{children:e(R,{children:s(c,{path:"/",element:e(L,{}),children:[e(c,{index:!0,element:e(p,{})}),e(c,{path:"/capgemini/react/",element:e(p,{})}),e(c,{path:"/capgemini/react/overview",element:e(p,{})}),e(c,{path:"/capgemini/react/register",element:e(J,{})}),e(c,{path:"*",element:e(Q,{})})]})})})}B.render(e(b.StrictMode,{children:e(X,{})}),document.getElementById("root"));
